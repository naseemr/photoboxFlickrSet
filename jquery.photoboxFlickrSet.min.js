(function(e){e.fn.photoboxFlickrSet=function(t){var n="";var r=e.extend({flickr_API_Key:"",photosetId:"",usePhotoTitle:false},t);if(r.flickr_API_Key.length<1){n+="Flicker API Key is required. \n"}if(r.photosetId.length<1){n+="Flicker Photoset Id is required. \n"}if(this.length<1){n+="DOM Element is missing."}if(n.length!==0){alert(n);return}var i=this.photobox({thumbs:true});var s="gallery"+(new Date).getTime();var o=e("<div/>").attr("id",s).addClass("pbGallery");this.html(o);e.ajax({url:"http://api.flickr.com/services/rest/",data:{format:"json",method:"flickr.photosets.getPhotos",api_key:t.flickr_API_Key,photoset_id:t.photosetId},dataType:"jsonp",jsonp:"jsoncallback"}).done(function(n){var r=e("#"+s),i;e.each(n.photoset.photo,function(n,s){i="http://farm"+s.farm+".static.flickr.com/"+s.server+"/"+s.id+"_"+s.secret;var o;if(t.usePhotoTitle){o=e("<img>").prop({src:i+"_s.jpg",title:s.title})}else{o=e("<img>").prop({src:i+"_s.jpg",title:""})}var u=document.createElement("a");u.href=i+"_b.jpg";u.appendChild(o[0]);r[0].appendChild(u);o.on("load",function(e){setTimeout(function(){u.className="loaded"},20*n)})});e("#"+s).find("a").bp})}})(jQuery)
